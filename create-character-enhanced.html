<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your Character - SuperDuolingo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Inter:wght@400;500;600&family=Fredoka+One:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --forest-green: #2D5016;
            --emerald-green: #50C878;
            --mint-green: #98FB98;
            --lime-green: #32CD32;
            --golden-yellow: #FFD700;
            --deep-blue: #1E3A8A;
            --warm-orange: #FF8C00;
            --purple: #8B5CF6;
            --charcoal: #2D3748;
            --light-gray: #F7FAFC;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--mint-green) 0%, var(--light-gray) 100%);
            min-height: 100vh;
        }
        
        .gaming-font {
            font-family: 'Fredoka One', cursive;
        }
        
        .primary-font {
            font-family: 'Nunito', sans-serif;
        }
        
        .character-option {
            background: white;
            border-radius: 16px;
            padding: 20px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .character-option:hover {
            border-color: var(--emerald-green);
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(80, 200, 120, 0.3);
        }
        
        .character-option.selected {
            border-color: var(--golden-yellow);
            background: var(--mint-green);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }
        
        .character-preview {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--mint-green), var(--light-gray));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 6rem;
            border: 4px solid var(--emerald-green);
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
        
        .attribute-section {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .attribute-option {
            background: #f3f4f6;
            border: 2px solid transparent;
            border-radius: 8px;
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 4px;
            display: inline-block;
        }
        
        .attribute-option:hover {
            border-color: var(--emerald-green);
            background: var(--mint-green);
        }
        
        .attribute-option.selected {
            border-color: var(--golden-yellow);
            background: var(--mint-green);
            font-weight: bold;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 4px;
            display: inline-block;
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.selected {
            border-color: var(--golden-yellow);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .gaming-button {
            background: linear-gradient(135deg, var(--emerald-green), var(--lime-green));
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px 32px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-size: 1.1rem;
        }
        
        .gaming-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(80, 200, 120, 0.4);
        }
        
        .gaming-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e9ecef;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin: 0 10px;
            position: relative;
        }
        
        .step.active {
            background: var(--emerald-green);
            color: white;
            box-shadow: 0 0 20px rgba(80, 200, 120, 0.5);
        }
        
        .step.completed {
            background: var(--golden-yellow);
            color: var(--charcoal);
        }
        
        .step::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 2px;
            background: #e9ecef;
            left: 40px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .step:last-child::after {
            display: none;
        }
        
        .step.completed::after {
            background: var(--golden-yellow);
        }
        
        .creation-step {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .creation-step.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .floating-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulse-glow {
            from { box-shadow: 0 0 20px rgba(80, 200, 120, 0.3); }
            to { box-shadow: 0 0 30px rgba(80, 200, 120, 0.6); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="text-center py-8">
        <div class="flex items-center justify-center space-x-4 mb-4">
            <img src="resources/mascot.png" alt="SuperDuolingo Mascot" class="h-16 w-16 floating-animation">
            <h1 class="gaming-font text-4xl text-forest-green">SuperDuolingo</h1>
        </div>
        <p class="primary-font text-xl text-gray-600">Create Your Language Learning Avatar</p>
    </header>

    <!-- Step Indicator -->
    <div class="step-indicator">
        <div class="step active" id="step-1">1</div>
        <div class="step" id="step-2">2</div>
        <div class="step" id="step-3">3</div>
        <div class="step" id="step-4">4</div>
        <div class="step" id="step-5">5</div>
    </div>

    <!-- Character Creation Container -->
    <div class="max-w-6xl mx-auto p-4">
        <!-- Step 1: Basic Character Type -->
        <div class="creation-step active" id="creation-step-1">
            <div class="text-center mb-8">
                <h2 class="gaming-font text-3xl text-charcoal mb-4">Choose Your Character Type</h2>
                <p class="primary-font text-lg text-gray-600">Select the avatar that will represent you on your language learning journey</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="character-option selected" data-character="warrior">
                    <div class="text-6xl mb-4">ü•∑üèª</div>
                    <h3 class="gaming-font text-xl text-charcoal mb-2">Language Warrior</h3>
                    <p class="text-sm text-gray-600 mb-4">Brave and determined, never gives up on challenges</p>
                    <div class="text-xs text-emerald-green font-semibold">High XP Bonus</div>
                </div>
                
                <div class="character-option" data-character="wizard">
                    <div class="text-6xl mb-4">üßô‚Äç‚ôÇÔ∏è</div>
                    <h3 class="gaming-font text-xl text-charcoal mb-2">Grammar Wizard</h3>
                    <p class="text-sm text-gray-600 mb-4">Wise and knowledgeable, masters language rules quickly</p>
                    <div class="text-xs text-deep-blue font-semibold">Grammar Boost</div>
                </div>
                
                <div class="character-option" data-character="explorer">
                    <div class="text-6xl mb-4">üïµüèª</div>
                    <h3 class="gaming-font text-xl text-charcoal mb-2">Culture Explorer</h3>
                    <p class="text-sm text-gray-600 mb-4">Curious and adventurous, loves discovering new cultures</p>
                    <div class="text-xs text-purple font-semibold">Culture Bonus</div>
                </div>
                
                <div class="character-option" data-character="scholar">
                    <div class="text-6xl mb-4">üë®üèª‚Äçüéì</div>
                    <h3 class="gaming-font text-xl text-charcoal mb-2">Knowledge Scholar</h3>
                    <p class="text-sm text-gray-600 mb-4">Methodical and patient, builds strong foundations</p>
                    <div class="text-xs text-warm-orange font-semibold">Retention Boost</div>
                </div>
            </div>
        </div>

        <!-- Step 2: Physical Attributes -->
        <div class="creation-step" id="creation-step-2">
            <div class="text-center mb-8">
                <h2 class="gaming-font text-3xl text-charcoal mb-4">Physical Appearance</h2>
                <p class="primary-font text-lg text-gray-600">Customize your character's physical attributes</p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="attribute-section">
                    <h3 class="gaming-font text-xl text-charcoal mb-4">Build & Stature</h3>
                    
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Height</h4>
                        <div class="flex flex-wrap">
                            <button class="attribute-option selected" data-attribute="height" data-value="average">Average</button>
                            <button class="attribute-option" data-attribute="height" data-value="tall">Tall</button>
                            <button class="attribute-option" data-attribute="height" data-value="short">Short</button>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Build</h4>
                        <div class="flex flex-wrap">
                            <button class="attribute-option selected" data-attribute="build" data-value="average">Average</button>
                            <button class="attribute-option" data-attribute="build" data-value="athletic">Athletic</button>
                            <button class="attribute-option" data-attribute="build" data-value="slim">Slim</button>
                            <button class="attribute-option" data-attribute="build" data-value="muscular">Muscular</button>
                        </div>
                    </div>
                </div>
                
                <div class="attribute-section">
                    <h3 class="gaming-font text-xl text-charcoal mb-4">Hair & Eyes</h3>
                    
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Hair Color</h4>
                        <div class="flex flex-wrap">
                            <button class="color-option selected" style="background: #8B4513;" data-attribute="hairColor" data-value="brown"></button>
                            <button class="color-option" style="background: #000000;" data-attribute="hairColor" data-value="black"></button>
                            <button class="color-option" style="background: #FFD700;" data-attribute="hairColor" data-value="blonde"></button>
                            <button class="color-option" style="background: #DC143C;" data-attribute="hairColor" data-value="red"></button>
                            <button class="color-option" style="background: #C0C0C0;" data-attribute="hairColor" data-value="gray"></button>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Eye Color</h4>
                        <div class="flex flex-wrap">
                            <button class="color-option selected" style="background: #8B4513;" data-attribute="eyeColor" data-value="brown"></button>
                            <button class="color-option" style="background: #0000FF;" data-attribute="eyeColor" data-value="blue"></button>
                            <button class="color-option" style="background: #008000;" data-attribute="eyeColor" data-value="green"></button>
                            <button class="color-option" style="background: #808080;" data-attribute="eyeColor" data-value="gray"></button>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Hair Style</h4>
                        <div class="flex flex-wrap">
                            <button class="attribute-option selected" data-attribute="hairStyle" data-value="short">Short</button>
                            <button class="attribute-option" data-attribute="hairStyle" data-value="long">Long</button>
                            <button class="attribute-option" data-attribute="hairStyle" data-value="curly">Curly</button>
                            <button class="attribute-option" data-attribute="hairStyle" data-value="straight">Straight</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: Distinctive Features -->
        <div class="creation-step" id="creation-step-3">
            <div class="text-center mb-8">
                <h2 class="gaming-font text-3xl text-charcoal mb-4">Distinctive Features</h2>
                <p class="primary-font text-lg text-gray-600">Add unique characteristics to make your character special</p>
            </div>
            
            <div class="attribute-section">
                <h3 class="gaming-font text-xl text-charcoal mb-4">Accessories & Features</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Headwear</h4>
                        <div class="flex flex-wrap">
                            <button class="attribute-option selected" data-attribute="headwear" data-value="none">None</button>
                            <button class="attribute-option" data-attribute="headwear" data-value="hat">üé© Hat</button>
                            <button class="attribute-option" data-attribute="headwear" data-value="cap">üß¢ Cap</button>
                            <button class="attribute-option" data-attribute="headwear" data-value="crown">üëë Crown</button>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Eyewear</h4>
                        <div class="flex flex-wrap">
                            <button class="attribute-option selected" data-attribute="eyewear" data-value="none">None</button>
                            <button class="attribute-option" data-attribute="eyewear" data-value="glasses">ü§ì Glasses</button>
                            <button class="attribute-option" data-attribute="eyewear" data-value="sunglasses">üòé Sunglasses</button>
                            <button class="attribute-option" data-attribute="eyewear" data-value="monocle">üßê Monocle</button>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h4 class="font-semibold text-gray-800 mb-2">Facial Features</h4>
                        <div class="flex flex-wrap">
                            <button class="attribute-option selected" data-attribute="facialFeature" data-value="none">None</button>
                            <button class="attribute-option" data-attribute="facialFeature" data-value="mole">ü™û Beauty Mark</button>
                            <button class="attribute-option" data-attribute="facialFeature" data-value="freckles">‚ú® Freckles</button>
                            <button class="attribute-option" data-attribute="facialFeature" data-value="beard">üßî Beard</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 5: Name and Finalize -->
        <div class="creation-step" id="creation-step-5">
            <div class="text-center mb-8">
                <h2 class="gaming-font text-3xl text-charcoal mb-4">Choose Your Name</h2>
                <p class="primary-font text-lg text-gray-600">What should we call you on your language learning adventure?</p>
            </div>
            
            <div class="attribute-section">
                <div class="max-w-md mx-auto">
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Your Hero Name:</label>
                        <input type="text" id="character-name" placeholder="Enter your hero name..." 
                               class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-emerald-green focus:outline-none text-lg">
                        <p class="text-xs text-gray-500 mt-2">Name must be 3-20 characters long</p>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Choose Your First Language:</label>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <button class="attribute-option selected" data-language="spanish">
                                <div class="text-2xl mb-1">üá™üá∏</div>
                                <div class="text-sm">Spanish</div>
                            </button>
                            <button class="attribute-option" data-language="french">
                                <div class="text-2xl mb-1">üá´üá∑</div>
                                <div class="text-sm">French</div>
                            </button>
                            <button class="attribute-option" data-language="german">
                                <div class="text-2xl mb-1">üá©üá™</div>
                                <div class="text-sm">German</div>
                            </button>
                            <button class="attribute-option" data-language="italian">
                                <div class="text-2xl mb-1">üáÆüáπ</div>
                                <div class="text-sm">Italian</div>
                            </button>
                            <button class="attribute-option" data-language="japanese">
                                <div class="text-2xl mb-1">üáØüáµ</div>
                                <div class="text-sm">Japanese</div>
                            </button>
                            <button class="attribute-option" data-language="english">
                                <div class="text-2xl mb-1">üá¨üáß</div>
                                <div class="text-sm">English</div>
                            </button>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button class="gaming-button text-xl px-12 py-4" onclick="finalizeCharacter()">
                            Create My Character! üöÄ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex justify-between items-center mt-8">
            <button id="prev-btn" class="gaming-button bg-gray-400 hover:bg-gray-500" onclick="previousStep()" style="display: none;">
                ‚Üê Previous
            </button>
            <div class="flex-1"></div>
            <button id="next-btn" class="gaming-button" onclick="nextStep()">
                Next ‚Üí
            </button>
            <button id="finalize-btn" class="gaming-button pulse-glow" onclick="finalizeCharacter()" style="display: none;">
                Create Character! üöÄ
            </button>
        </div>
    </div>

    <script>
        class EnhancedCharacterCreation {
            constructor() {
                this.currentStep = 1;
                this.totalSteps = 5;
                this.characterData = {
                    type: 'warrior',
                    color: 'green',
                    name: '',
                    language: 'spanish',
                    height: 'average',
                    build: 'average',
                    hairColor: 'brown',
                    hairStyle: 'short',
                    eyeColor: 'brown',
                    headwear: 'none',
                    eyewear: 'none',
                    facialFeature: 'none'
                };
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.updateStepIndicator();
                this.animateElements();
            }
            
            setupEventListeners() {
                // Character type selection
                document.querySelectorAll('.character-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        this.selectCharacterType(e.currentTarget);
                    });
                });
                
                // Attribute selection
                document.querySelectorAll('.attribute-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        this.selectAttribute(e.currentTarget);
                    });
                });
                
                // Color selection
                document.querySelectorAll('.color-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        this.selectColor(e.currentTarget);
                    });
                });
                
                // Language selection
                document.querySelectorAll('[data-language]').forEach(option => {
                    option.addEventListener('click', (e) => {
                        this.selectLanguage(e.currentTarget);
                    });
                });
                
                // Name input
                document.getElementById('character-name').addEventListener('input', (e) => {
                    this.characterData.name = e.target.value;
                    this.updateNextButton();
                });
            }
            
            selectCharacterType(option) {
                // Remove selected from all options
                document.querySelectorAll('.character-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Add selected to clicked option
                option.classList.add('selected');
                this.characterData.type = option.dataset.character;
                
                // Update preview
                this.updateCharacterPreview();
                this.updateNextButton();
                
                // Add selection animation
                anime({
                    targets: option,
                    scale: [1, 1.05, 1],
                    duration: 300,
                    easing: 'easeOutQuad'
                });
            }
            
            selectAttribute(option) {
                const attribute = option.dataset.attribute;
                const value = option.dataset.value;
                
                // Remove selected from siblings
                document.querySelectorAll(`[data-attribute="${attribute}"]`).forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Add selected to clicked option
                option.classList.add('selected');
                this.characterData[attribute] = value;
                
                // Update preview
                this.updateCharacterPreview();
                
                // Add selection animation
                anime({
                    targets: option,
                    scale: [1, 1.1, 1],
                    duration: 300,
                    easing: 'easeOutQuad'
                });
            }
            
            selectColor(option) {
                // Remove selected from siblings
                const siblings = option.parentElement.querySelectorAll('.color-option');
                siblings.forEach(opt => opt.classList.remove('selected'));
                
                // Add selected to clicked option
                option.classList.add('selected');
                
                const color = option.dataset.color;
                if (color) {
                    this.characterData.color = color;
                    this.updateThemePreview();
                }
                
                // Add selection animation
                anime({
                    targets: option,
                    scale: [1, 1.1, 1],
                    duration: 300,
                    easing: 'easeOutQuad'
                });
            }
            
            selectLanguage(option) {
                // Remove selected from all language options
                document.querySelectorAll('[data-language]').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Add selected to clicked option
                option.classList.add('selected');
                this.characterData.language = option.dataset.language;
                
                // Add selection animation
                anime({
                    targets: option,
                    scale: [1, 1.05, 1],
                    duration: 300,
                    easing: 'easeOutQuad'
                });
            }
            
            updateCharacterPreview() {
                const emojiMap = {
                    warrior: '‚öîÔ∏è',
                    wizard: 'üßô‚Äç‚ôÇÔ∏è',
                    explorer: 'üó∫Ô∏è',
                    scholar: 'üìö'
                };
                
                document.getElementById('home-character-emoji').textContent = emojiMap[this.characterData.type];
                this.updateThemePreview();
            }
            
            updateThemePreview() {
                const colorMap = {
                    green: 'linear-gradient(135deg, #50C878, #32CD32)',
                    blue: 'linear-gradient(135deg, #1E3A8A, #8B5CF6)',
                    orange: 'linear-gradient(135deg, #FF8C00, #FFD700)',
                    red: 'linear-gradient(135deg, #dc3545, #e83e8c)'
                };
                
                document.getElementById('theme-preview').style.background = colorMap[this.characterData.color];
                
                const emojiMap = {
                    warrior: '‚öîÔ∏è',
                    wizard: 'üßô‚Äç‚ôÇÔ∏è',
                    explorer: 'üó∫Ô∏è',
                    scholar: 'üìö'
                };
                
                document.getElementById('theme-emoji').textContent = emojiMap[this.characterData.type];
            }
            
            nextStep() {
                if (this.currentStep < this.totalSteps) {
                    this.currentStep++;
                    this.updateStep();
                }
            }
            
            previousStep() {
                if (this.currentStep > 1) {
                    this.currentStep--;
                    this.updateStep();
                }
            }
            
            updateStep() {
                // Hide all steps
                document.querySelectorAll('.creation-step').forEach(step => {
                    step.classList.remove('active');
                });
                
                // Show current step
                document.getElementById(`creation-step-${this.currentStep}`).classList.add('active');
                
                // Update step indicator
                this.updateStepIndicator();
                
                // Update navigation buttons
                this.updateNavigationButtons();
                
                // Update theme preview if on step 4
                if (this.currentStep === 4) {
                    this.updateThemePreview();
                }
                
                // Animate step transition
                anime({
                    targets: `#creation-step-${this.currentStep}`,
                    opacity: [0, 1],
                    translateY: [20, 0],
                    duration: 500,
                    easing: 'easeOutQuad'
                });
            }
            
            updateStepIndicator() {
                document.querySelectorAll('.step').forEach((step, index) => {
                    const stepNumber = index + 1;
                    step.classList.remove('active', 'completed');
                    
                    if (stepNumber === this.currentStep) {
                        step.classList.add('active');
                    } else if (stepNumber < this.currentStep) {
                        step.classList.add('completed');
                    }
                });
            }
            
            updateNavigationButtons() {
                const prevBtn = document.getElementById('prev-btn');
                const nextBtn = document.getElementById('next-btn');
                const finalizeBtn = document.getElementById('finalize-btn');
                
                // Show/hide previous button
                if (this.currentStep === 1) {
                    prevBtn.style.display = 'none';
                } else {
                    prevBtn.style.display = 'block';
                }
                
                // Show/hide next/finalize buttons
                if (this.currentStep === this.totalSteps) {
                    nextBtn.style.display = 'none';
                    finalizeBtn.style.display = 'block';
                } else {
                    nextBtn.style.display = 'block';
                    finalizeBtn.style.display = 'none';
                }
                
                // Update next button state
                this.updateNextButton();
            }
            
            updateNextButton() {
                const nextBtn = document.getElementById('next-btn');
                const finalizeBtn = document.getElementById('finalize-btn');
                
                let canProceed = true;
                
                if (this.currentStep === 5) {
                    // Name step - check if name is entered
                    canProceed = this.characterData.name.trim().length >= 3;
                }
                
                if (this.currentStep === this.totalSteps) {
                    finalizeBtn.disabled = !canProceed;
                } else {
                    nextBtn.disabled = !canProceed;
                }
            }
            
            finalizeCharacter() {
                if (this.characterData.name.trim().length < 3) {
                    alert('Please enter a name with at least 3 characters');
                    return;
                }
                
                // Save character data to localStorage
                localStorage.setItem('superduolingo-character', JSON.stringify(this.characterData));
                
                // Show success animation
                this.showSuccessAnimation();
                
                // Redirect to main app after animation
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 3000);
            }
            
            showSuccessAnimation() {
                // Create celebration effect
                for (let i = 0; i < 50; i++) {
                    const particle = document.createElement('div');
                    particle.style.cssText = `
                        position: fixed;
                        width: 10px;
                        height: 10px;
                        background: ${['#50C878', '#32CD32', '#FFD700', '#FF8C00'][Math.floor(Math.random() * 4)]};
                        border-radius: 50%;
                        pointer-events: none;
                        z-index: 1000;
                        left: 50%;
                        top: 50%;
                    `;
                    document.body.appendChild(particle);
                    
                    anime({
                        targets: particle,
                        translateX: (Math.random() - 0.5) * 800,
                        translateY: (Math.random() - 0.5) * 800,
                        scale: [1, 0],
                        opacity: [1, 0],
                        duration: 2000,
                        easing: 'easeOutQuad',
                        complete: () => {
                            document.body.removeChild(particle);
                        }
                    });
                }
                
                // Show success message
                const message = document.createElement('div');
                message.innerHTML = `
                    <div style="text-align: center; color: white;">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">üéâ</div>
                        <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">Welcome, ${this.characterData.name}!</h2>
                        <p style="font-size: 1.2rem;">Your adventure begins now!</p>
                    </div>
                `;
                message.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(135deg, #50C878, #32CD32);
                    padding: 2rem;
                    border-radius: 20px;
                    z-index: 1001;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                `;
                
                document.body.appendChild(message);
                
                anime({
                    targets: message,
                    scale: [0, 1],
                    opacity: [0, 1],
                    duration: 1000,
                    easing: 'easeOutBack'
                });
            }
            
            animateElements() {
                // Animate character options
                anime({
                    targets: '.character-option',
                    translateY: [50, 0],
                    opacity: [0, 1],
                    delay: anime.stagger(200),
                    duration: 800,
                    easing: 'easeOutExpo'
                });
                
                // Animate step indicator
                anime({
                    targets: '.step',
                    scale: [0, 1],
                    delay: anime.stagger(100),
                    duration: 600,
                    easing: 'easeOutBack'
                });
            }
        }
        
        // Global functions for button clicks
        function nextStep() {
            window.characterCreation.nextStep();
        }
        
        function previousStep() {
            window.characterCreation.previousStep();
        }
        
        function finalizeCharacter() {
            window.characterCreation.finalizeCharacter();
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.characterCreation = new EnhancedCharacterCreation();
        });
    </script>
</body>
</html>
